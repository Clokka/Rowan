  <script>
    const sortSelect = document.getElementById("sort-select");
    const grid = document.getElementById("product-grid");

    sortSelect.addEventListener("change", () => {
      const products = Array.from(grid.children);

      const sorted = products.sort((a, b) => {
        const sortType = sortSelect.value;
        const priceA = parseFloat(a.dataset.price);
        const priceB = parseFloat(b.dataset.price);
        const dateA = new Date(a.dataset.date);
        const dateB = new Date(b.dataset.date);
        const salesA = parseInt(a.dataset.sales);
        const salesB = parseInt(b.dataset.sales);

        switch (sortType) {
          case "price-low":
            return priceA - priceB;
          case "price-high":
            return priceB - priceA;
          case "newest":
            return dateB - dateA;
          case "bestselling":
            return salesB - salesA;
          default:
            return 0;
        }
      });

      grid.innerHTML = "";
      sorted.forEach(product => grid.appendChild(product));
    });

    function updateCartCount() {
      const cart = JSON.parse(localStorage.getItem('cart')) || [];
      const totalCount = cart.reduce((sum, item) => sum + item.quantity, 0);
      const badge = document.getElementById('cart-count');
      if (totalCount > 0) {
        badge.textContent = totalCount;
        badge.style.display = 'flex';
      } else {
        badge.style.display = 'none';
      }
    }

    updateCartCount();
  </script>
</body>
</html>
